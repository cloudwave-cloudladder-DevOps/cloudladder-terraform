{"changed":true,"filter":false,"title":"saas.tf","tooltip":"/terraform/cloudladder/saas.tf","value":"\ndata \"archive_file\" \"personalize_lambda\" {\n  type        = \"zip\"\n  source_file = \"personalize_lambda.py\"\n  output_path = \"personalize_lambda.zip\"\n}\n\ndata \"archive_file\" \"connect_lambda\" {\n  type        = \"zip\"\n  source_file = \"connect_lambda.py\"\n  output_path = \"connect_lambda.zip\"\n}\n\nresource \"aws_lambda_function\" \"personalize_lambda\" {\n  # If the file is not in the current working directory you will need to include a\n  # path.module in the filename.\n  filename      = \"personalize_lambda.zip\"\n  function_name = \"personalize_lambda\"\n  role          = aws_iam_role.iam_for_lambda.arn\n  handler       = \"index.test\"\n\n  source_code_hash = data.archive_file.personalize_lambda.output_base64sha256\n\n  runtime = \"python3.8\"\n\n  environment {\n    variables = {\n      foo = \"bar\"\n    }\n  }\n}\n\nresource \"aws_lambda_function\" \"connect_lambda\" {\n  # If the file is not in the current working directory you will need to include a\n  # path.module in the filename.\n  filename      = \"connect_lambda.zip\"\n  function_name = \"connect_lambda\"\n  role          = aws_iam_role.iam_for_lambda.arn\n  handler       = \"index.test\"\n\n  source_code_hash = data.archive_file.connect_lambda.output_base64sha256\n\n  runtime = \"python3.8\"\n\n  environment {\n    variables = {\n      foo = \"bar\"\n    }\n  }\n}","undoManager":{"mark":0,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":66,"column":1},"action":"insert","lines":["data \"aws_iam_policy_document\" \"assume_role\" {","  statement {","    effect = \"Allow\"","","    principals {","      type        = \"Service\"","      identifiers = [\"lambda.amazonaws.com\"]","    }","","    actions = [\"sts:AssumeRole\"]","  }","}","","resource \"aws_iam_role\" \"iam_for_lambda\" {","  name               = \"iam_for_lambda\"","  assume_role_policy = data.aws_iam_policy_document.assume_role.json","}","","data \"archive_file\" \"personalize_lambda\" {","  type        = \"zip\"","  source_file = \"personalize_lambda.py\"","  output_path = \"personalize_lambda.zip\"","}","","data \"archive_file\" \"connect_lambda\" {","  type        = \"zip\"","  source_file = \"connect_lambda.py\"","  output_path = \"connect_lambda.zip\"","}","","resource \"aws_lambda_function\" \"personalize_lambda\" {","  # If the file is not in the current working directory you will need to include a","  # path.module in the filename.","  filename      = \"personalize_lambda.zip\"","  function_name = \"personalize_lambda\"","  role          = aws_iam_role.iam_for_lambda.arn","  handler       = \"index.test\"","","  source_code_hash = data.archive_file.personalize_lambda.output_base64sha256","","  runtime = \"python3.8\"","","  environment {","    variables = {","      foo = \"bar\"","    }","  }","}","","resource \"aws_lambda_function\" \"connect_lambda\" {","  # If the file is not in the current working directory you will need to include a","  # path.module in the filename.","  filename      = \"connect_lambda.zip\"","  function_name = \"connect_lambda\"","  role          = aws_iam_role.iam_for_lambda.arn","  handler       = \"index.test\"","","  source_code_hash = data.archive_file.connect_lambda.output_base64sha256","","  runtime = \"python3.8\"","","  environment {","    variables = {","      foo = \"bar\"","    }","  }","}"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":16,"column":1},"action":"remove","lines":["data \"aws_iam_policy_document\" \"assume_role\" {","  statement {","    effect = \"Allow\"","","    principals {","      type        = \"Service\"","      identifiers = [\"lambda.amazonaws.com\"]","    }","","    actions = [\"sts:AssumeRole\"]","  }","}","","resource \"aws_iam_role\" \"iam_for_lambda\" {","  name               = \"iam_for_lambda\"","  assume_role_policy = data.aws_iam_policy_document.assume_role.json","}"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["#"],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["#"],"id":4},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1708961725444}