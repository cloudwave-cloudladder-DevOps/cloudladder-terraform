{"changed":true,"filter":false,"title":"acm_s3_ecr.tf","tooltip":"/terraform/acm_s3_ecr.tf","value":"#acm.tf\n\nresource \"aws_acmpca_certificate_authority\" \"cloudladderdev\" {\n type = \"ROOT\"\n\n certificate_authority_configuration {\n  key_algorithm   = \"RSA_2048\"\n  signing_algorithm = \"SHA512WITHRSA\"\n\n  subject {\n   common_name = \"cloudladderdev.com\"\n  }\n }\n permanent_deletion_time_in_days = 7\n}\n\nresource \"aws_acmpca_certificate\" \"cloudladderdev\" {\n certificate_authority_arn  = aws_acmpca_certificate_authority.cloudladderdev.arn\n certificate_signing_request = aws_acmpca_certificate_authority.cloudladderdev.certificate_signing_request\n signing_algorithm      = \"SHA512WITHRSA\"\n template_arn = \"arn:${data.aws_partition.current.partition}:acm-pca:::template/RootCACertificate/V1\"\n\n validity {\n  type = \"YEARS\"\n  value = 3\n }\n}\n\n\ndata \"aws_partition\" \"current\" {}\n\nresource \"aws_acmpca_permission\" \"dev_private_ca_permission\" {\n  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderdev.arn\n  actions                   = [\"IssueCertificate\", \"GetCertificate\", \"ListPermissions\"]\n  principal                 = \"acm.amazonaws.com\"\n}\n\nresource \"aws_acmpca_certificate_authority_certificate\" \"cloudladderdev\" {\n certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderdev.arn\n certificate    = aws_acmpca_certificate.cloudladderdev.certificate\n certificate_chain = aws_acmpca_certificate.cloudladderdev.certificate_chain\n}\n\nresource \"time_sleep\" \"dev_wait_30_seconds\" {\n  create_duration = \"30s\"\n  depends_on      = [aws_acmpca_certificate_authority_certificate.cloudladderdev]\n}\n\nresource \"aws_acm_certificate\" \"dev_request_cert\" {\n  domain_name               = \"cloudladderdev.com\"\n  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderdev.arn\n  key_algorithm             = \"RSA_2048\"\n\n  lifecycle {\n    create_before_destroy = true\n  }\n\n  depends_on = [time_sleep.dev_wait_30_seconds]\n}\n\n#acm.tf\n\nresource \"aws_acmpca_certificate_authority\" \"cloudladderprod\" {\n type = \"ROOT\"\n\n certificate_authority_configuration {\n  key_algorithm   = \"RSA_2048\"\n  signing_algorithm = \"SHA512WITHRSA\"\n\n  subject {\n   common_name = \"cloudladderprod.com\"\n  }\n }\n permanent_deletion_time_in_days = 7\n}\n\nresource \"aws_acmpca_certificate\" \"cloudladderprod\" {\n certificate_authority_arn  = aws_acmpca_certificate_authority.cloudladderprod.arn\n certificate_signing_request = aws_acmpca_certificate_authority.cloudladderprod.certificate_signing_request\n signing_algorithm      = \"SHA512WITHRSA\"\n\n template_arn = \"arn:${data.aws_partition.current.partition}:acm-pca:::template/RootCACertificate/V1\"\n\n validity {\n  type = \"YEARS\"\n  value = 3\n }\n}\n\nresource \"aws_acmpca_permission\" \"prod_private_ca_permission\" {\n  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderprod.arn\n  actions                   = [\"IssueCertificate\", \"GetCertificate\", \"ListPermissions\"]\n  principal                 = \"acm.amazonaws.com\"\n}\n\nresource \"aws_acmpca_certificate_authority_certificate\" \"cloudladderprod\" {\n certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderprod.arn\n certificate    = aws_acmpca_certificate.cloudladderprod.certificate\n certificate_chain = aws_acmpca_certificate.cloudladderprod.certificate_chain\n}\n\nresource \"time_sleep\" \"prod_wait_30_seconds\" {\n  create_duration = \"30s\"\n  depends_on      = [aws_acmpca_certificate_authority_certificate.cloudladderprod]\n}\n\nresource \"aws_acm_certificate\" \"prod_request_cert\" {\n  domain_name               = \"cloudladderprod.com\"\n  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderprod.arn\n  key_algorithm             = \"RSA_2048\"\n\n  lifecycle {\n    create_before_destroy = true\n  }\n\n  depends_on = [time_sleep.prod_wait_30_seconds]\n}\n\noutput \"dev_request_cert\" {\n  value       = aws_acm_certificate.dev_request_cert.arn\n  description = \"prod_request_cert\"\n}\n\noutput \"prod_request_cert\" {\n  value       = aws_acm_certificate.prod_request_cert.arn\n  description = \"prod_request_cert\"\n}\n\n###########################ecr.tf###################\n\nresource \"aws_ecr_repository\" \"java_repository\" {\n  name = \"java_cloudladder\"\n  image_tag_mutability = \"MUTABLE\"\n  force_delete = true\n\n  image_scanning_configuration {\n    scan_on_push = true\n  }\n}\n\noutput \"java_repository_url\" {\n  description = \"The URL of the repository.\"\n  value = aws_ecr_repository.java_repository.repository_url\n}\n\nresource \"aws_ecr_repository\" \"node_repository\" {\n  name = \"node_cloudladder\"\n  image_tag_mutability = \"MUTABLE\"\n  force_delete = true\n\n  image_scanning_configuration {\n    scan_on_push = true\n  }\n}\n\noutput \"node_repository_url\" {\n  description = \"The URL of the repository.\"\n  value = aws_ecr_repository.node_repository.repository_url\n}\n\n##########################s3##########################\n\nresource \"aws_s3_bucket\" \"personalize\" {\n    bucket = var.s3_personalize_id\n\n    versioning {\n        enabled = true\n    }\n\n    lifecycle {\n        prevent_destroy = false\n    }\n}\n\nresource \"aws_s3_bucket\" \"static\" {\n    bucket = var.s3_static_id\n\n    versioning {\n        enabled = true\n    }\n\n    lifecycle {\n        prevent_destroy = false\n    }\n}\n\nresource \"aws_s3_bucket\" \"backup\" {\n    bucket = var.s3_backup_id\n\n    versioning {\n        enabled = true\n    }\n    force_destroy = true\n}\n\noutput \"s3_backup_arn\" {\n  description = \"The arn of the backup s3.\"\n  value = aws_s3_bucket.backup.arn\n}\noutput \"s3_backup_id\" {\n  description = \"The id of the backup s3.\"\n  value = aws_s3_bucket.backup.id\n}","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":202,"column":1},"action":"insert","lines":["#acm.tf","","resource \"aws_acmpca_certificate_authority\" \"cloudladderdev\" {"," type = \"ROOT\"",""," certificate_authority_configuration {","  key_algorithm   = \"RSA_2048\"","  signing_algorithm = \"SHA512WITHRSA\"","","  subject {","   common_name = \"cloudladderdev.com\"","  }"," }"," permanent_deletion_time_in_days = 7","}","","resource \"aws_acmpca_certificate\" \"cloudladderdev\" {"," certificate_authority_arn  = aws_acmpca_certificate_authority.cloudladderdev.arn"," certificate_signing_request = aws_acmpca_certificate_authority.cloudladderdev.certificate_signing_request"," signing_algorithm      = \"SHA512WITHRSA\""," template_arn = \"arn:${data.aws_partition.current.partition}:acm-pca:::template/RootCACertificate/V1\"",""," validity {","  type = \"YEARS\"","  value = 3"," }","}","","","data \"aws_partition\" \"current\" {}","","resource \"aws_acmpca_permission\" \"dev_private_ca_permission\" {","  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderdev.arn","  actions                   = [\"IssueCertificate\", \"GetCertificate\", \"ListPermissions\"]","  principal                 = \"acm.amazonaws.com\"","}","","resource \"aws_acmpca_certificate_authority_certificate\" \"cloudladderdev\" {"," certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderdev.arn"," certificate    = aws_acmpca_certificate.cloudladderdev.certificate"," certificate_chain = aws_acmpca_certificate.cloudladderdev.certificate_chain","}","","resource \"time_sleep\" \"dev_wait_30_seconds\" {","  create_duration = \"30s\"","  depends_on      = [aws_acmpca_certificate_authority_certificate.cloudladderdev]","}","","resource \"aws_acm_certificate\" \"dev_request_cert\" {","  domain_name               = \"cloudladderdev.com\"","  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderdev.arn","  key_algorithm             = \"RSA_2048\"","","  lifecycle {","    create_before_destroy = true","  }","","  depends_on = [time_sleep.dev_wait_30_seconds]","}","","#acm.tf","","resource \"aws_acmpca_certificate_authority\" \"cloudladderprod\" {"," type = \"ROOT\"",""," certificate_authority_configuration {","  key_algorithm   = \"RSA_2048\"","  signing_algorithm = \"SHA512WITHRSA\"","","  subject {","   common_name = \"cloudladderprod.com\"","  }"," }"," permanent_deletion_time_in_days = 7","}","","resource \"aws_acmpca_certificate\" \"cloudladderprod\" {"," certificate_authority_arn  = aws_acmpca_certificate_authority.cloudladderprod.arn"," certificate_signing_request = aws_acmpca_certificate_authority.cloudladderprod.certificate_signing_request"," signing_algorithm      = \"SHA512WITHRSA\"",""," template_arn = \"arn:${data.aws_partition.current.partition}:acm-pca:::template/RootCACertificate/V1\"",""," validity {","  type = \"YEARS\"","  value = 3"," }","}","","resource \"aws_acmpca_permission\" \"prod_private_ca_permission\" {","  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderprod.arn","  actions                   = [\"IssueCertificate\", \"GetCertificate\", \"ListPermissions\"]","  principal                 = \"acm.amazonaws.com\"","}","","resource \"aws_acmpca_certificate_authority_certificate\" \"cloudladderprod\" {"," certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderprod.arn"," certificate    = aws_acmpca_certificate.cloudladderprod.certificate"," certificate_chain = aws_acmpca_certificate.cloudladderprod.certificate_chain","}","","resource \"time_sleep\" \"prod_wait_30_seconds\" {","  create_duration = \"30s\"","  depends_on      = [aws_acmpca_certificate_authority_certificate.cloudladderprod]","}","","resource \"aws_acm_certificate\" \"prod_request_cert\" {","  domain_name               = \"cloudladderprod.com\"","  certificate_authority_arn = aws_acmpca_certificate_authority.cloudladderprod.arn","  key_algorithm             = \"RSA_2048\"","","  lifecycle {","    create_before_destroy = true","  }","","  depends_on = [time_sleep.prod_wait_30_seconds]","}","","output \"dev_request_cert\" {","  value       = aws_acm_certificate.dev_request_cert.arn","  description = \"prod_request_cert\"","}","","output \"prod_request_cert\" {","  value       = aws_acm_certificate.prod_request_cert.arn","  description = \"prod_request_cert\"","}","","###########################ecr.tf###################","","resource \"aws_ecr_repository\" \"java_repository\" {","  name = \"java_cloudladder\"","  image_tag_mutability = \"MUTABLE\"","  force_delete = true","","  image_scanning_configuration {","    scan_on_push = true","  }","}","","output \"java_repository_url\" {","  description = \"The URL of the repository.\"","  value = aws_ecr_repository.java_repository.repository_url","}","","resource \"aws_ecr_repository\" \"node_repository\" {","  name = \"node_cloudladder\"","  image_tag_mutability = \"MUTABLE\"","  force_delete = true","","  image_scanning_configuration {","    scan_on_push = true","  }","}","","output \"node_repository_url\" {","  description = \"The URL of the repository.\"","  value = aws_ecr_repository.node_repository.repository_url","}","","##########################s3##########################","","resource \"aws_s3_bucket\" \"personalize\" {","    bucket = var.s3_personalize_id","","    versioning {","        enabled = true","    }","","    lifecycle {","        prevent_destroy = false","    }","}","","resource \"aws_s3_bucket\" \"static\" {","    bucket = var.s3_static_id","","    versioning {","        enabled = true","    }","","    lifecycle {","        prevent_destroy = false","    }","}","","resource \"aws_s3_bucket\" \"backup\" {","    bucket = var.s3_backup_id","","    versioning {","        enabled = true","    }","    force_destroy = true","}","","output \"s3_backup_arn\" {","  description = \"The arn of the backup s3.\"","  value = aws_s3_bucket.backup.arn","}","output \"s3_backup_id\" {","  description = \"The id of the backup s3.\"","  value = aws_s3_bucket.backup.id","}"],"id":1}]]},"ace":{"folds":[],"scrolltop":3265,"scrollleft":0,"selection":{"start":{"row":202,"column":1},"end":{"row":202,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":162,"state":"start","mode":"ace/mode/terraform"}},"timestamp":1708961548854}